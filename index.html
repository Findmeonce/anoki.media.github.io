<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Anoki — Monteur vidéo freelance</title>
    <link rel="icon" href="assets/logo_anoki-media.svg" type="image/svg+xml" />
    <link href="https://fonts.googleapis.com/css2?family=TikTok+Sans:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body>
    <div id="site-root" aria-live="polite"></div>
    <div id="lang-switch">
      <button id="btn-fr" class="lang-btn">FR</button>
      <button id="btn-en" class="lang-btn">EN</button>
    </div>

    <script src="js/site.js"></script>
    <script>
      const partials = [
        'partials/header.html',
        'partials/hero.html',
        'partials/work.html',
        'partials/footer.html?v=3'
      ];

      function boot() {
        Site.initLangUI();
        Site.loadPartials(partials);
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', boot);
      } else {
        boot();
      }

      document.addEventListener('partialsLoaded', () => {
        const radios = document.querySelectorAll('input[name="work-filter"]');
        const status = document.getElementById('work-status');
        const lang = document.documentElement.lang || 'fr';
        const updateStatus = (value, labelText) => {
          if (!status) return;
          if (value === 'all') {
            status.textContent = lang === 'fr' ? 'Affichage : toutes les catégories' : 'Showing all categories';
          } else {
            status.textContent = lang === 'fr' ? `Affichage : ${labelText}` : `Showing ${labelText}`;
          }
        };
        radios.forEach(radio => {
          radio.addEventListener('change', (event) => {
            const value = event.target.value;
            const label = event.target.closest('label');
            const labelText = label ? label.innerText.trim() : value;
            if (value === 'all') {
              const work = document.getElementById('work');
              if (work) work.scrollIntoView({ behavior: 'smooth', block: 'start' });
              updateStatus(value, labelText);
              history.replaceState(null, '', window.location.pathname + window.location.search);
              return;
            }
            const target = document.getElementById(value);
            if (target) {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
              updateStatus(value, labelText);
              const base = window.location.pathname + window.location.search;
              history.replaceState(null, '', `${base}#${value}`);
            }
          });
        });
        const checked = document.querySelector('input[name="work-filter"]:checked');
        if (checked) {
          const label = checked.closest('label');
          const labelText = label ? label.innerText.trim() : checked.value;
          updateStatus(checked.value, labelText);
        }
      });
    </script>
  </body>
</html>
